<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="icon" href="../logo.svg">
<link rel="stylesheet" href="../mccole.css" type="text/css">
<title>The Querynomicon &middot; Selecting</title>
<script>
  MathJax = {
    tex: {
      inlineMath: [['\\(', '\\)']]
    }
  };
</script>
<script
  type="text/javascript"
  id="MathJax-script"
  async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
</script>

  <script defer data-domain="gvwilson.github.io/sql-tutorial" src="https://plausible.io/js/plausible.js"></script>


  </head>
  <body>
    <main>
      <div class="row notex">
  <div class="col-1"></div>
  <div class="col-10 center">
    
      <h1>Selecting</h1>
    
  </div>
  <div class="col-1"></div>
</div>

      
<div class="row notex">
  <div class="col-1 left">
    <a href="../intro/">&lArr;</a>
  </div>
  <div class="col-10"></div>
  <div class="col-1 right">
    <a href="../missing/">&rArr;</a>
  </div>
</div>


      
      <p class="terms">Terms defined: 
<a class="gl-ref" href="../glossary/#gl:admin_command" markdown="1">administration command</a>, <a class="gl-ref" href="../glossary/#gl:exclusive_or" markdown="1">exclusive or</a>, <a class="gl-ref" href="../glossary/#gl:filter" markdown="1">filter</a>, <a class="gl-ref" href="../glossary/#gl:inclusive_or" markdown="1">inclusive or</a>, <a class="gl-ref" href="../glossary/#gl:query" markdown="1">query</a>
</p>
      <h2>Selecting Constant</h2>
<div class="language-sql" title="select_1.sql">
<div class="highlight"><pre><span></span><code><span class="k">select</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
</code></pre></div>
</div>
<div class="language-out" title="select_1.out">
<div class="highlight"><pre><span></span><code>1
</code></pre></div>
</div>
<ul>
<li><code>select</code> is a keyword</li>
<li>Normally used to select data from table…</li>
<li>…but if all we want is a constant value, we don&rsquo;t need to specify one</li>
<li>Semi-colon terminator is required</li>
</ul>
<h2>Selecting All Values from Table</h2>
<div class="language-sql" title="select_star.sql">
<div class="highlight"><pre><span></span><code><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">little_penguins</span><span class="p">;</span>
</code></pre></div>
</div>
<div class="language-out" title="select_star.out">
<div class="highlight"><pre><span></span><code>Gentoo|Biscoe|51.3|14.2|218.0|5300.0|MALE
Adelie|Dream|35.7|18.0|202.0|3550.0|FEMALE
Adelie|Torgersen|36.6|17.8|185.0|3700.0|FEMALE
Chinstrap|Dream|55.8|19.8|207.0|4000.0|MALE
Adelie|Dream|38.1|18.6|190.0|3700.0|FEMALE
Adelie|Dream|36.2|17.3|187.0|3300.0|FEMALE
Adelie|Dream|39.5|17.8|188.0|3300.0|FEMALE
Gentoo|Biscoe|42.6|13.7|213.0|4950.0|FEMALE
Gentoo|Biscoe|52.1|17.0|230.0|5550.0|MALE
Adelie|Torgersen|36.7|18.8|187.0|3800.0|FEMALE
</code></pre></div>
</div>
<ul>
<li>An actual <a class="gl-ref" href="../glossary/#gl:query" markdown="1">query</a></li>
<li>Use <code>*</code> to mean &ldquo;all columns&rdquo;</li>
<li>Use <code>from <em>tablename</em></code> to specify table</li>
<li>Output format is not particularly readable</li>
</ul>
<h2 class="aside">Administrative Commands</h2>
<div class="language-sql" title="admin_commands.sql">
<div class="highlight"><pre><span></span><code><span class="p">.</span><span class="n">headers</span><span class="w"> </span><span class="k">on</span>
<span class="p">.</span><span class="k">mode</span><span class="w"> </span><span class="n">markdown</span>
<span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">little_penguins</span><span class="p">;</span>
</code></pre></div>
</div>
<div class="language-out" title="admin_commands.out">
<div class="highlight"><pre><span></span><code>|  species  |  island   | bill_length_mm | bill_depth_mm | flipper_length_mm | body_mass_g |  sex   |
|-----------|-----------|----------------|---------------|-------------------|-------------|--------|
| Gentoo    | Biscoe    | 51.3           | 14.2          | 218.0             | 5300.0      | MALE   |
| Adelie    | Dream     | 35.7           | 18.0          | 202.0             | 3550.0      | FEMALE |
| Adelie    | Torgersen | 36.6           | 17.8          | 185.0             | 3700.0      | FEMALE |
| Chinstrap | Dream     | 55.8           | 19.8          | 207.0             | 4000.0      | MALE   |
| Adelie    | Dream     | 38.1           | 18.6          | 190.0             | 3700.0      | FEMALE |
| Adelie    | Dream     | 36.2           | 17.3          | 187.0             | 3300.0      | FEMALE |
| Adelie    | Dream     | 39.5           | 17.8          | 188.0             | 3300.0      | FEMALE |
| Gentoo    | Biscoe    | 42.6           | 13.7          | 213.0             | 4950.0      | FEMALE |
| Gentoo    | Biscoe    | 52.1           | 17.0          | 230.0             | 5550.0      | MALE   |
| Adelie    | Torgersen | 36.7           | 18.8          | 187.0             | 3800.0      | FEMALE |
</code></pre></div>
</div>
<ul>
<li><code>.mode markdown</code> and <code>.headers on</code> make the output more readable</li>
<li>These SQLite <a class="gl-ref" href="../glossary/#gl:admin_command" markdown="1">administrative commands</a>
    start with <code>.</code> and <em>aren&rsquo;t</em> part of the SQL standard<ul>
<li>PostgreSQL&rsquo;s special commands start with <code>\</code></li>
</ul>
</li>
<li>Each command must appear on a line of its own</li>
<li>Use <code>.help</code> for a complete list</li>
<li>And as mentioned earlier, use <code>.quit</code> to quit</li>
</ul>
<h2>Specifying Columns</h2>
<div class="language-sql" title="specify_columns.sql">
<div class="highlight"><pre><span></span><code><span class="k">select</span>
<span class="w">    </span><span class="n">species</span><span class="p">,</span>
<span class="w">    </span><span class="n">island</span><span class="p">,</span>
<span class="w">    </span><span class="n">sex</span>
<span class="k">from</span><span class="w"> </span><span class="n">little_penguins</span><span class="p">;</span>
</code></pre></div>
</div>
<div class="language-out" title="specify_columns.out">
<div class="highlight"><pre><span></span><code>|  species  |  island   |  sex   |
|-----------|-----------|--------|
| Gentoo    | Biscoe    | MALE   |
| Adelie    | Dream     | FEMALE |
| Adelie    | Torgersen | FEMALE |
| Chinstrap | Dream     | MALE   |
| Adelie    | Dream     | FEMALE |
| Adelie    | Dream     | FEMALE |
| Adelie    | Dream     | FEMALE |
| Gentoo    | Biscoe    | FEMALE |
| Gentoo    | Biscoe    | MALE   |
| Adelie    | Torgersen | FEMALE |
</code></pre></div>
</div>
<ul>
<li>Specify column names separated by commas<ul>
<li>In any order</li>
<li>Duplicates allowed</li>
</ul>
</li>
<li>Line breaks <strike>allowed</strike> encouraged for readability</li>
</ul>
<h2>Sorting</h2>
<div class="language-sql" title="sort.sql">
<div class="highlight"><pre><span></span><code><span class="k">select</span>
<span class="w">    </span><span class="n">species</span><span class="p">,</span>
<span class="w">    </span><span class="n">sex</span><span class="p">,</span>
<span class="w">    </span><span class="n">island</span>
<span class="k">from</span><span class="w"> </span><span class="n">little_penguins</span>
<span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">island</span><span class="w"> </span><span class="k">asc</span><span class="p">,</span><span class="w"> </span><span class="n">sex</span><span class="w"> </span><span class="k">desc</span><span class="p">;</span>
</code></pre></div>
</div>
<div class="language-out" title="sort.out">
<div class="highlight"><pre><span></span><code>|  species  |  sex   |  island   |
|-----------|--------|-----------|
| Gentoo    | MALE   | Biscoe    |
| Gentoo    | MALE   | Biscoe    |
| Gentoo    | FEMALE | Biscoe    |
| Chinstrap | MALE   | Dream     |
| Adelie    | FEMALE | Dream     |
| Adelie    | FEMALE | Dream     |
| Adelie    | FEMALE | Dream     |
| Adelie    | FEMALE | Dream     |
| Adelie    | FEMALE | Torgersen |
| Adelie    | FEMALE | Torgersen |
</code></pre></div>
</div>
<ul>
<li><code>order by</code> must follow <code>from</code> (which must follow <code>select</code>)</li>
<li><code>asc</code> is ascending, <code>desc</code> is descending<ul>
<li>Default is ascending, but please specify</li>
</ul>
</li>
</ul>
<h2 class="exercise">Exercise</h2>
<p>Write a SQL query to select the sex and body mass columns from the <code>little_penguins</code> in that order,
sorted such that the largest body mass appears first.</p>
<h2>Limiting Output</h2>
<ul>
<li>Full dataset has 344 rows</li>
</ul>
<div class="language-sql" title="limit.sql">
<div class="highlight"><pre><span></span><code><span class="k">select</span>
<span class="w">    </span><span class="n">species</span><span class="p">,</span>
<span class="w">    </span><span class="n">sex</span><span class="p">,</span>
<span class="w">    </span><span class="n">island</span>
<span class="k">from</span><span class="w"> </span><span class="n">penguins</span>
<span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">species</span><span class="p">,</span><span class="w"> </span><span class="n">sex</span><span class="p">,</span><span class="w"> </span><span class="n">island</span>
<span class="k">limit</span><span class="w"> </span><span class="mi">10</span><span class="p">;</span>
</code></pre></div>
</div>
<div class="language-out" title="limit.out">
<div class="highlight"><pre><span></span><code>| species |  sex   |  island   |
|---------|--------|-----------|
| Adelie  |        | Dream     |
| Adelie  |        | Torgersen |
| Adelie  |        | Torgersen |
| Adelie  |        | Torgersen |
| Adelie  |        | Torgersen |
| Adelie  |        | Torgersen |
| Adelie  | FEMALE | Biscoe    |
| Adelie  | FEMALE | Biscoe    |
| Adelie  | FEMALE | Biscoe    |
| Adelie  | FEMALE | Biscoe    |
</code></pre></div>
</div>
<ul>
<li>Comments start with <code>--</code> and run to the end of the line</li>
<li><code>limit <em>N</em></code> specifies maximum number of rows returned by query</li>
</ul>
<h2>Paging Output</h2>
<div class="language-sql" title="page.sql">
<div class="highlight"><pre><span></span><code><span class="k">select</span>
<span class="w">    </span><span class="n">species</span><span class="p">,</span>
<span class="w">    </span><span class="n">sex</span><span class="p">,</span>
<span class="w">    </span><span class="n">island</span>
<span class="k">from</span><span class="w"> </span><span class="n">penguins</span>
<span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">species</span><span class="p">,</span><span class="w"> </span><span class="n">sex</span><span class="p">,</span><span class="w"> </span><span class="n">island</span>
<span class="k">limit</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="k">offset</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span>
</code></pre></div>
</div>
<div class="language-out" title="page.out">
<div class="highlight"><pre><span></span><code>| species |  sex   |  island   |
|---------|--------|-----------|
| Adelie  |        | Torgersen |
| Adelie  |        | Torgersen |
| Adelie  |        | Torgersen |
| Adelie  | FEMALE | Biscoe    |
| Adelie  | FEMALE | Biscoe    |
| Adelie  | FEMALE | Biscoe    |
| Adelie  | FEMALE | Biscoe    |
| Adelie  | FEMALE | Biscoe    |
| Adelie  | FEMALE | Biscoe    |
| Adelie  | FEMALE | Biscoe    |
</code></pre></div>
</div>
<ul>
<li><code>offset <em>N</em></code> must follow <code>limit</code></li>
<li>Specifies number of rows to skip from the start of the selection</li>
<li>So this query skips the first 3 and shows the next 10</li>
</ul>
<h2>Removing Duplicates</h2>
<div class="language-sql" title="distinct.sql">
<div class="highlight"><pre><span></span><code><span class="k">select</span><span class="w"> </span><span class="k">distinct</span>
<span class="w">    </span><span class="n">species</span><span class="p">,</span>
<span class="w">    </span><span class="n">sex</span><span class="p">,</span>
<span class="w">    </span><span class="n">island</span>
<span class="k">from</span><span class="w"> </span><span class="n">penguins</span><span class="p">;</span>
</code></pre></div>
</div>
<div class="language-out" title="distinct.out">
<div class="highlight"><pre><span></span><code>|  species  |  sex   |  island   |
|-----------|--------|-----------|
| Adelie    | MALE   | Torgersen |
| Adelie    | FEMALE | Torgersen |
| Adelie    |        | Torgersen |
| Adelie    | FEMALE | Biscoe    |
| Adelie    | MALE   | Biscoe    |
| Adelie    | FEMALE | Dream     |
| Adelie    | MALE   | Dream     |
| Adelie    |        | Dream     |
| Chinstrap | FEMALE | Dream     |
| Chinstrap | MALE   | Dream     |
| Gentoo    | FEMALE | Biscoe    |
| Gentoo    | MALE   | Biscoe    |
| Gentoo    |        | Biscoe    |
</code></pre></div>
</div>
<ul>
<li><code>distinct</code> keyword must appear right after <code>select</code><ul>
<li>SQL was supposed to read like English</li>
</ul>
</li>
<li>Shows distinct combinations</li>
<li>Blanks in <code>sex</code> column show missing data<ul>
<li>We&rsquo;ll talk about this in a bit</li>
</ul>
</li>
</ul>
<h2 class="exercise">Exercise</h2>
<ol>
<li>
<p>Write a SQL query to select the islands and species
    from rows 50 to 60 inclusive of the <code>penguins</code> table.
    Your result should have 11 rows.</p>
</li>
<li>
<p>Modify your query to select distinct combinations of island and species
    from the same rows
    and compare the result to what you got in part 1.</p>
</li>
</ol>
<h2>Filtering Results</h2>
<div class="language-sql" title="filter.sql">
<div class="highlight"><pre><span></span><code><span class="k">select</span><span class="w"> </span><span class="k">distinct</span>
<span class="w">    </span><span class="n">species</span><span class="p">,</span>
<span class="w">    </span><span class="n">sex</span><span class="p">,</span>
<span class="w">    </span><span class="n">island</span>
<span class="k">from</span><span class="w"> </span><span class="n">penguins</span>
<span class="k">where</span><span class="w"> </span><span class="n">island</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;Biscoe&#39;</span><span class="p">;</span>
</code></pre></div>
</div>
<div class="language-out" title="filter.out">
<div class="highlight"><pre><span></span><code>| species |  sex   | island |
|---------|--------|--------|
| Adelie  | FEMALE | Biscoe |
| Adelie  | MALE   | Biscoe |
| Gentoo  | FEMALE | Biscoe |
| Gentoo  | MALE   | Biscoe |
| Gentoo  |        | Biscoe |
</code></pre></div>
</div>
<ul>
<li><code>where <em>condition</em></code> <a class="gl-ref" href="../glossary/#gl:filter" markdown="1">filters</a> the rows produced by selection</li>
<li>Condition is evaluated independently for each row</li>
<li>Only rows that pass the test appear in results</li>
<li>Use single quotes for <code>'text data'</code> and double quotes for <code>"weird column names"</code><ul>
<li>SQLite will accept double-quoted text data but <a href="https://sqlfluff.com/">SQLFluff</a> will complain</li>
</ul>
</li>
</ul>
<h2 class="exercise">Exercise</h2>
<ol>
<li>
<p>Write a query to select the body masses from <code>penguins</code> that are less than 3000.0 grams.</p>
</li>
<li>
<p>Write another query to select the species and sex of penguins that weight less than 3000.0 grams.
    This shows that the columns displayed and those used in filtering are independent of each other.</p>
</li>
</ol>
<h2>Filtering with More Complex Conditions</h2>
<div class="language-sql" title="filter_and.sql">
<div class="highlight"><pre><span></span><code><span class="k">select</span><span class="w"> </span><span class="k">distinct</span>
<span class="w">    </span><span class="n">species</span><span class="p">,</span>
<span class="w">    </span><span class="n">sex</span><span class="p">,</span>
<span class="w">    </span><span class="n">island</span>
<span class="k">from</span><span class="w"> </span><span class="n">penguins</span>
<span class="k">where</span><span class="w"> </span><span class="n">island</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;Biscoe&#39;</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">sex</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="s1">&#39;MALE&#39;</span><span class="p">;</span>
</code></pre></div>
</div>
<div class="language-out" title="filter_and.out">
<div class="highlight"><pre><span></span><code>| species |  sex   | island |
|---------|--------|--------|
| Adelie  | FEMALE | Biscoe |
| Gentoo  | FEMALE | Biscoe |
</code></pre></div>
</div>
<ul>
<li><code>and</code>: both sub-conditions must be true</li>
<li><code>or</code>: either or both part must be true</li>
<li>Notice that the row for Gentoo penguins on Biscoe island with unknown (empty) sex didn&rsquo;t pass the test<ul>
<li>We&rsquo;ll talk about this in a bit</li>
</ul>
</li>
</ul>
<h2 class="exercise">Exercise</h2>
<ol>
<li>
<p>Use the <code>not</code> operator to select penguins that are <em>not</em> Gentoos.</p>
</li>
<li>
<p>SQL&rsquo;s <code>or</code> is an <a class="gl-ref" href="../glossary/#gl:inclusive_or" markdown="1">inclusive or</a>:
    it succeeds if either <em>or both</em> conditions are true.
    SQL does not provide a specific operator for <a class="gl-ref" href="../glossary/#gl:exclusive_or" markdown="1">exclusive or</a>,
    which is true if either <em>but not both</em> conditions are true,
    but the same effect can be achieved using <code>and</code>, <code>or</code>, and <code>not</code>.
    Write a query to select penguins that are female <em>or</em> on Torgersen Island <em>but not both</em>.</p>
</li>
</ol>
<h2>Doing Calculations</h2>
<div class="language-sql" title="calculations.sql">
<div class="highlight"><pre><span></span><code><span class="k">select</span>
<span class="w">    </span><span class="n">flipper_length_mm</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">10</span><span class="p">.</span><span class="mi">0</span><span class="p">,</span>
<span class="w">    </span><span class="n">body_mass_g</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">1000</span><span class="p">.</span><span class="mi">0</span>
<span class="k">from</span><span class="w"> </span><span class="n">penguins</span>
<span class="k">limit</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span>
</code></pre></div>
</div>
<div class="language-out" title="calculations.out">
<div class="highlight"><pre><span></span><code>| flipper_length_mm / 10.0 | body_mass_g / 1000.0 |
|--------------------------|----------------------|
| 18.1                     | 3.75                 |
| 18.6                     | 3.8                  |
| 19.5                     | 3.25                 |
</code></pre></div>
</div>
<ul>
<li>Can do the usual kinds of arithmetic on individual values<ul>
<li>Calculation done for each row independently</li>
</ul>
</li>
<li>Column name shows the calculation done</li>
</ul>
<h2>Renaming Columns</h2>
<div class="language-sql" title="rename_columns.sql">
<div class="highlight"><pre><span></span><code><span class="k">select</span>
<span class="w">    </span><span class="n">flipper_length_mm</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">10</span><span class="p">.</span><span class="mi">0</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">flipper_cm</span><span class="p">,</span>
<span class="w">    </span><span class="n">body_mass_g</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">1000</span><span class="p">.</span><span class="mi">0</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">weight_kg</span><span class="p">,</span>
<span class="w">    </span><span class="n">island</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">where_found</span>
<span class="k">from</span><span class="w"> </span><span class="n">penguins</span>
<span class="k">limit</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span>
</code></pre></div>
</div>
<div class="language-out" title="rename_columns.out">
<div class="highlight"><pre><span></span><code>| flipper_cm | weight_kg | where_found |
|------------|-----------|-------------|
| 18.1       | 3.75      | Torgersen   |
| 18.6       | 3.8       | Torgersen   |
| 19.5       | 3.25      | Torgersen   |
</code></pre></div>
</div>
<ul>
<li>Use <code><em>expression</em> as <em>name</em></code> to rename</li>
<li>Give result of calculation a meaningful name</li>
<li>Can also rename columns without modifying</li>
</ul>
<h2 class="exercise">Exercise</h2>
<p>Write a single query that calculates and returns:</p>
<ol>
<li>A column called <code>what_where</code> that has the species and island of each penguin
    separated by a single space.</li>
<li>A column called <code>bill_ratio</code> that has the ratio of bill length to bill depth.</li>
</ol>
<p>You can use the <code>||</code> operator to concatenate text to solve part 1,
or look at <a href="https://sqlite.org/printf.html">the documentation for SQLite&rsquo;s <code>format()</code> function</a>.</p>
<h2 class="aside">Check Understanding</h2>
<figure id="select_concept_map">
<img src="./select_concept_map.svg" alt="box and arrow diagram of concepts related to selection"/>
<figcaption>Figure&nbsp;2.1: selection</figcaption>
</figure>
    </main>
    <footer>
  © 2024 <a href="https://third-bit.com/">Greg Wilson</a>
  &middot;
  <a href="../">home</a>
  &middot;
  <a href="https://github.com/gvwilson/sql-tutorial">repository</a>
  &middot;
  <a href="../license/">license</a>
</footer>

  </body>
</html>
